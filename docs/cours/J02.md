# J02 - MLD, MPD, OOP

## Menu du jour

```
- Correction Challenge
  - MLD
  - MPD
  - Scripts NPM

- POO | Programmation Orient√© Objet
  - (Factory Design Pattern)
  - Classes / Instances
    - Attributs publiques/priv√©s avec setter/getter 
    - M√©thodes d'instance
    - (bonus) M√©thodes de classe
    - H√©ritage
```

## Cr√©er l'utilisateur et la BDD

- Se connecter √† son serveur SGBD Postgres via le client CLI psql : 
  - `sudo -i -u postgres psql`

- Cr√©er un utilisateur de BDD (admin pour notre future BDD) : 
  - `CREATE ROLE oquiz WITH LOGIN PASSWORD 'oquiz';`

- Cr√©er une BDD :
  - `CREATE DATABASE oquiz WITH OWNER oquiz;`

- Se placer sur la BDD oquiz avec mon utilisateur oquiz
  - `\c oquiz oquiz`

- Ex√©cuter un fichier 
  - `\i <chemin_du_fichier>`

- V√©rifier la pr√©sence des tables
  - `\d`

- V√©rifier une table
  - `\d nom_table`

- Si probl√®me avec MON script, pensez √† supprimer et recr√©er votre BDD
  - `DROP DATABASE oquiz;`
  - `CREATE DATABASE oquiz WITH OWNER oquiz;`


- Note : on peut aussi ex√©cuter le script en DEHORS de psql 
  - `exit` (pour sortir de PSQL)
  - `psql -U oquiz -d oquiz -f chemin_vers_le_fichier`


## POO - Programmation Orient√©e Objet

(en üá∫üá∏ OOP, Object-Oriented Programming)

### Disclamer

En JavaScript, on a d√©j√† des objets `{}`. 

Mais certains languages n'en pr√©sentent pas par d√©faut (ex : `C++`, `Java`, ...) et utilise une autre syntaxe pour cr√©er des objets.

En JS, faire de la POO, c'est un peu du "**sucre syntaxique**" => on pourrait tout faire sans POO. 

### Pourquoi apprendre la POO ?

- Omnipr√©sent dans d'autres languages, et la syntaxe est g√©n√©ralement tr√®s similaire voire identique.
- Parfois pr√©sent en JS (`new Date()`, `new Error()`, `new Client()`, dans des librairies comme `Sequelize`, etc...)
- Une fa√ßon de cod√© tr√®s classique => un **Design Pattern**. Par exemple, beaucoup de POO dans le developpement de jeux vid√©os.
- Pourquoi maintenant ? Parce que l'objectif de cette saison est d'introduire `Sequelize` (ORM) qui utilise la POO sous le capot ! 

### Kesako ?

Objet = repr√©senter "quelque chose" avec des propri√©t√©s. Souvent avec des √©l√©ments communs.

Derri√®re la POO, on trouve une notion de **Factory** = une fabrique √† objet, un sorte de "moule" pour g√©n√©rer des objets au m√™me format.

- `20min` : voyons ensemble se design pattern factory SANS POO (en JS pure) pour comprendre le principe
- `40min` : on ajoute le sucre syntaxique de la POO (`class`, `new`) pour apprendre la POO !


### Factory

Une fonction factory est une fonction qui permet de fabriquer des objets avec toujours le m√™me format. 


### Propri√©t√© publique et priv√©e

```js
class Cat {
  #name; // Propri√©t√© priv√©e
  #color; // Propri√©t√© priv√©e
  isHungry; // Propri√©t√© publique

  constructor(name, color) { // Constructeur
    this.#name = name;
    this.#color = color;
    this.isHungry = true;
  }

  getName() { // Getter 
    return this.#name;
  }

  getColor() { // Getter
    return this.#color;
  }

  setName(newName) { // Setter
    if (/* V√©rifier en BDD si le nom du chat n'est pas d√©j√† pris */) { ... }

    this.#name = newName
  }
}


const cat = new Cat("Garfield", "orange");

console.log(cat.#name); // ‚ùå interdit
console.log(cat.#color); // ‚ùå interdit
console.log(cat.isHungry; // ‚úÖ true

console.log(cat.getName()); // ‚úÖ "Garfield"
console.log(cat.getColor()); // ‚úÖ "orange"

cat.setName("Miaous"); // ‚úÖ
console.log(cat.getName()); // ‚úÖ "Miaous"

cat.isHungry = true; // ‚úÖ OK (car public)

```


## H√©ritage

Objectif : 
- cr√©er une classe "fille" qui h√©rite de toutes les propri√©t√©s et m√©thodes de la classe "parente".
- on peut ajouter autant de propri√©t√©s et m√©thode que l'on veut sur la classe fille.

Comment : 
- mot cl√© : `extends`
- dans le constructor, on oublie pas d'appeler le constructeur du parent via le mot cl√© `super()`


Attention avec l'h√©ritage, sur la classe fille on ne peut pas RETIRER une m√©thode du parent => on h√©rite de tout. A la limite on ne s'en sert pas.

![](../screenshots/heritage.png)

